<!DOCTYPE html>
<html>
<head>
    <title>Attendance Summary</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div style="text-align:center;margin-bottom:20px;">
        <a href="/attendance_summary.csv" class="download-btn">Download CSV</a>
        <a href="/logout" class="download-btn" style="margin-left:10px;background:#ffb6c1;">Logout</a>
        <a href="/fetch-attendance" class="download-btn" style="margin-left:10px;background:#32cd32;">Fetch Live Attendance</a>
    </div>
    {% if first_name %}
    <div style="text-align:center;font-size:1.3em;font-weight:bold;margin-bottom:10px;">
        Hi {{ first_name }}, this is your attendance
    </div>
    {% endif %}
    <div class="center">
        <table class="striped">
            <thead>
                <tr>
                    <th>Course Code</th>
                    <th>Attended</th>
                    <th>Missed</th>
                    <th>Percentage Attendance</th>
                    <th>Total Sessions</th>
                    <th>Sessions Can Be Missed</th>
                </tr>
            </thead>
            <tbody>
                {% if table_data|length == 0 %}
                <tr>
                    <td colspan="6" style="text-align:center;color:red;font-weight:bold;">No data available. Please check your CSV files and ensure course codes match.</td>
                </tr>
                {% else %}
                {% for row in table_data %}
                <tr>
                    <td>{{ row['Course Code'] }}</td>
                    <td>{{ row['Attended'] }}</td>
                    <td>{{ row['Missed'] }}</td>
                    <td>{{ row['Percentage Attendance'] }}</td>
                    <td>{{ row['Total Sessions'] }}</td>
                    <td>{{ row['Sessions Can Be Missed'] }}</td>
                </tr>
                {% endfor %}
                {% endif %}
            </tbody>
        </table>
    </div>
</body>
</html>